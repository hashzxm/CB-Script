<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Similarity Slut Report</title>
    <link rel="icon" type="image/png" href="callgirlc.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* gray-100 */
            color: #1f2937; /* gray-800 */
            transition: background-color 0.3s, color 0.3s;
        }
        .dark body {
            background-color: #111827; /* gray-900 */
            color: #d1d5db; /* gray-300 */
        }
        .card, .top-picks-card {
            background-color: white;
            border-color: #e5e7eb; /* gray-200 */
        }
        .dark .card, .dark .top-picks-card {
            background-color: #1f2937; /* gray-800 */
            border-color: #374151; /* gray-700 */
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .dark .card:hover {
             box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.4);
        }
        .highlight {
            background-color: #d1fae5; /* green-200 */
        }
        .dark .highlight {
            background-color: #064e3b; /* green-900 */
        }
        .two-year-highlight {
            background-color: #dbeafe; /* blue-200 */
        }
        .dark .two-year-highlight {
            background-color: #1e3a8a; /* blue-900 */
        }
        .sim-highlight {
            background-color: #fef3c7; /* amber-200 */
        }
        .dark .sim-highlight {
            background-color: #78350f; /* amber-900 */
        }
        .highlight .player-name, .sim-highlight .player-name, .two-year-highlight .player-name {
            font-weight: 600;
        }
        .dark .highlight .player-name { color: #a7f3d0; }
        .dark .two-year-highlight .player-name { color: #93c5fd; }
        .dark .sim-highlight .player-name { color: #fcd34d; }

        .low-data {
            color: #6b7280; /* gray-500 */
            font-style: italic;
        }
        .dark .low-data {
            color: #9ca3af; /* gray-400 */
        }
        .table-header th {
            background-color: #f9fafb; /* gray-50 */
        }
        .dark .table-header th {
            background-color: #374151; /* gray-700 */
            color: #d1d5db; /* gray-300 */
        }
        .player-row:hover {
            background-color: #f9fafb; /* gray-50 */
        }
        .dark .player-row:hover {
            background-color: #374151; /* gray-700 */
        }
        .toggle-btn {
            transition: background-color 0.3s, color 0.3s;
        }
        .sortable {
            cursor: pointer;
            user-select: none;
        }
        .sortable:hover {
            background-color: #e5e7eb; /* gray-200 */
        }
        .dark .sortable:hover {
            background-color: #4b5563; /* gray-600 */
        }
        .sort-asc::after { content: ' ▲'; font-size: 0.7em; }
        .sort-desc::after { content: ' ▼'; font-size: 0.7em; }
        
        /* Light & Dark Mode Fixes */
        .game-header {
            background-color: #e5e7eb; /* gray-200 */
            color: #1f2937; /* gray-800 */
        }
        .dark .game-header { 
            background-color: #374151; /* gray-700 */
            color: #f9fafb; /* gray-50 */
        }
        .pitcher-stats-box {
             background-color: #f9fafb; /* gray-50 */
             color: #374151; /* gray-700 */
        }
        .dark .pitcher-stats-box {
            background-color: #1f2937; /* gray-800 */
            color: #9ca3af; /* gray-400 */
        }

        /* Accordion Styles */
        details > summary {
            list-style: none;
            cursor: pointer;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details .summary-chevron {
            transition: transform 0.2s;
        }
        details[open] .summary-chevron {
            transform: rotate(90deg);
        }

        /* Notepad Styles */
        #notepad {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            width: 300px;
            max-height: 400px;
            display: flex;
            flex-direction: column;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            z-index: 100;
            background-color: white;
            border: 1px solid #e5e7eb;
        }
        .dark #notepad {
            background-color: #1f2937;
            border-color: #374151;
        }
        #notepad-header {
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .dark #notepad-header {
            border-color: #374151;
        }
        #notepad-textarea {
            flex-grow: 1;
            padding: 0.75rem;
            border: none;
            background: transparent;
            resize: none;
            color: #1f2937;
        }
        .dark #notepad-textarea {
            color: #d1d5db;
        }
        #notepad-textarea:focus {
            outline: none;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8">

    <div id="main-content">
        <div class="max-w-7xl mx-auto relative">
            <button id="theme-toggle" type="button" class="absolute top-0 left-0 text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5">
                <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
            </button>
            <button id="zxm-button" class="absolute top-0 right-0 px-4 py-2 text-sm bg-gray-800 text-white font-bold rounded-lg shadow-lg hover:bg-black focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75 transition-all transform hover:scale-105">
                zxm
            </button>
            <header class="text-center mb-8">
                <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 dark:text-gray-100">Similarity Slut</h1>
                 <div id="game-filter-controls" class="my-6">
                     <div class="max-w-md mx-auto">
                        <select id="game-selector" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
                            <!-- Options will be populated by JS -->
                        </select>
                    </div>
                    <button id="go-back-btn" class="hidden mt-4 px-4 py-2 bg-gray-600 text-white font-semibold rounded-lg shadow-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-75">
                        ← Show All Games
                    </button>
                </div>
                <div class="flex flex-wrap justify-center items-center gap-2 mt-6">
                    <button id="toggle-top-reports-btn" class="px-4 py-2 text-sm bg-purple-600 text-white font-semibold rounded-lg shadow-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-75 toggle-btn">
                        Hide Top Reports
                    </button>
                    <button id="toggle-90day-btn" class="px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 toggle-btn">
                        Toggle High 90-Day Prob
                    </button>
                     <button id="toggle-2year-btn" class="px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 toggle-btn">
                        Toggle Top 2-Year Prob
                    </button>
                     <button id="toggle-compscore-btn" class="px-4 py-2 text-sm bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 toggle-btn">
                        Toggle High HR Similarity
                    </button>
                </div>
            </header>
            
            <div id="top-reports-container" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div id="similarity-container"></div>
                <div id="strikeout-container"></div>
            </div>

            <main id="report-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                </main>
            
            <div id="no-data-message" class="hidden text-center py-16">
                <p class="text-xl text-gray-500">No matching players found for this filter.</p>
            </div>

        </div>
        
        <footer class="mt-12 text-center">
             <div class="disclaimer my-6 max-w-2xl mx-auto p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800">
                <p class="text-sm text-gray-600 dark:text-gray-400 font-semibold text-center">Disclaimer</p>
                <p class="text-xs text-gray-500 dark:text-gray-400 italic text-center mt-2">
                    This report is generated for entertainment and data analysis purposes only. The predictions and similarities are based on statistical models and historical data, and they are not guaranteed to be accurate. This is not gambling advice. Please bet responsibly and within your means.
                </p>
            </div>
            <iframe src="https://giphy.com/embed/krkrHAEodHgzP72rTI" width="480" height="269" style="max-width: 100%;" frameBorder="0" class="giphy-embed mx-auto" allowFullScreen></iframe><p><a href="https://giphy.com/gifs/disneyplus-krkrHAEodHgzP72rTI" class="text-xs text-gray-500 dark:text-gray-400">via GIPHY</a></p>
        </footer>
    </div>

    <!-- Notepad -->
    <div id="notepad">
        <div id="notepad-header">
            <span class="font-semibold text-gray-700 dark:text-gray-200">Notepad</span>
            <div>
                <button id="download-notepad-btn" class="px-2 py-1 text-xs bg-blue-500 hover:bg-blue-600 text-white rounded">Download</button>
                <button id="clear-notepad-btn" class="px-2 py-1 text-xs bg-red-500 hover:bg-red-600 text-white rounded">Clear</button>
            </div>
        </div>
        <textarea id="notepad-textarea" placeholder="Double-click a player's name to add them here..."></textarea>
    </div>

    <script>
        // Store the parsed data globally to avoid re-parsing
        let allGamesData = [];
        let currentSort = { key: null, order: 'desc' };
        let activeFilter = 'none'; // 'none', '90day', '2year', 'compscore'

        const strikeoutPredictionsText = `
⚾ Pitcher Strikeout Predictions ⚾

- Cade Povich: 7.36
- Max Fried: 6.99
- Sonny Gray: 5.94
- Michael Soroka: 5.77
- Yusei Kikuchi: 5.33
- Sean Manaea: 5.29
- Nick Lodolo: 5.27
- Quinn Priester: 5.22
- Casey Mize: 4.89
- Tyler Glasnow: 4.85
- Patrick Corbin: 4.69
- Slade Cecconi: 4.67
- Eric Lauer: 4.38
- JP Sears: 4.27
- Justin Verlander: 3.97
- Brandon Pfaadt: 3.95
- Johan Oviedo: 3.93
- Brayan Bello: 3.89
- Adrian Houser: 3.4
- Bailey Falter: 3.36
- Jason Alexander: 3.3
- Travis Adams: 3.24
- Erick Fedde: 3.03
- Tanner Gordon: 2.84
`;

        const similarityReportText = `
========================================================================================================================
                                      BATTER SIMILARITY REPORT - 2025-08-04 - RANKED BY 90-DAY SCORE                                      
========================================================================================================================
  Rank  | Batter                    | Pitcher                   | 90-Day Sim      |   2-Year Sim    | Game                                 
  ----- | ------------------------- | ------------------------- | --------------- | --------------- | ------------------------------
  #1    | J. T. Realmuto            | Cade Povich               | 100.0/100       |    94.1/100     | Orioles @ Phillies                 
  #2    | Bobby Witt                | Brayan Bello              | 97.4/100        |    74.8/100     | Royals @ Red Sox                   
  #3    | Maikel García             | Brayan Bello              | 93.7/100        |    94.2/100     | Royals @ Red Sox                   
  #4    | Vladimir Guerrero         | Tanner Gordon             | 93.2/100        |    69.3/100     | Blue Jays @ Rockies              
  #5    | Jazz Chisholm             | Patrick Corbin            |    90.5/100     | 83.9/100        | Yankees @ Rangers                  
  #6    | Fernando Tatís            | Brandon Pfaadt            |    88.0/100     | 72.9/100        | Padres @ Diamondbacks              
  #7    | Josh Jung                 | Max Fried                 | 86.2/100        |    68.6/100     | Yankees @ Rangers                  
  #8    | Luis Arráez               | Brandon Pfaadt            |    84.7/100     | 75.4/100        | Padres @ Diamondbacks              
  #9    | Brandon Nimmo             | Slade Cecconi             | 80.8/100        |    56.9/100     | Guardians @ Mets                   
  #10   | Carlos Narváez            | Bailey Falter             | 77.2/100        |    53.9/100     | Royals @ Red Sox                   
  #11   | Victor Scott              | Tyler Glasnow             | 76.5/100        |    15.6/100     | Cardinals @ Dodgers                
  #12   | Mike Yastrzemski          | Brayan Bello              | 71.3/100        |    74.2/100     | Royals @ Red Sox                   
  #13   | Sam Haggerty              | Max Fried                 | 69.5/100        |    53.6/100     | Yankees @ Rangers                  
  #14   | Jake Cronenworth          | Brandon Pfaadt            |    69.5/100     | 72.2/100        | Padres @ Diamondbacks              
  #15   | Salvador Pérez            | Brayan Bello              | 69.2/100        |    57.5/100     | Royals @ Red Sox                   
  #16   | Angel Martínez            | Sean Manaea               | 68.3/100        |    44.9/100     | Guardians @ Mets                   
  #17   | Shohei Ohtani             | Sonny Gray                | 67.7/100        |    27.1/100     | Cardinals @ Dodgers                
  #18   | Bryan Reynolds            | Justin Verlander          |    65.7/100     | 57.7/100        | Giants @ Pirates                   
  #19   | Cedric Mullins            | Slade Cecconi             | 65.6/100        |    64.7/100     | Guardians @ Mets                   
  #20   | Matt Shaw                 | Nick Lodolo               | 65.3/100        |    36.5/100     | Reds @ Cubs                        
  #21   | Joey Ortiz                | Erick Fedde               | 64.9/100        |    39.3/100     | Brewers @ Braves                   
  #22   | Pete Alonso               | Slade Cecconi             | 64.7/100        |    51.1/100     | Guardians @ Mets                   
  #23   | Freddie Freeman           | Sonny Gray                | 64.2/100        |    43.7/100     | Cardinals @ Dodgers                
  #24   | Xander Bogaerts           | Brandon Pfaadt            |    64.0/100     | 70.0/100        | Padres @ Diamondbacks              
  #25   | Trevor Story              | Bailey Falter             | 63.9/100        |    59.3/100     | Royals @ Red Sox                   
  #26   | Jurickson Profar          | Quinn Priester            |    63.7/100     | 69.6/100        | Brewers @ Braves                   
  #27   | José Herrera              | JP Sears                  | 63.0/100        |     8.7/100     | Padres @ Diamondbacks              
  #28   | Manny Machado             | Brandon Pfaadt            |    61.4/100     | 56.4/100        | Padres @ Diamondbacks              
  #29   | Andy Pages                | Sonny Gray                | 61.0/100        |    55.3/100     | Cardinals @ Dodgers                
  #30   | Austin Slater             | Patrick Corbin            |    60.4/100     | 49.2/100        | Yankees @ Rangers                  
  #31   | Kyle Higashioka           | Max Fried                 | 60.3/100        |    58.6/100     | Yankees @ Rangers                  
  #32   | Jarren Duran              | Bailey Falter             | 60.2/100        |    46.2/100     | Royals @ Red Sox                   
  #33   | Teoscar Hernández         | Sonny Gray                | 59.9/100        |    64.8/100     | Cardinals @ Dodgers                
  #34   | Alec Burleson             | Tyler Glasnow             | 59.4/100        |    33.9/100     | Cardinals @ Dodgers                
  #35   | Brice Turang              | Erick Fedde               | 58.8/100        |    38.3/100     | Brewers @ Braves                   
  #36   | Jonah Heim                | Max Fried                 | 58.5/100        |    39.2/100     | Yankees @ Rangers                  
  #37   | Vinnie Pasquantino        | Brayan Bello              | 58.1/100        |    61.8/100     | Royals @ Red Sox                   
  #38   | Junior Caminero           | Yusei Kikuchi             | 57.1/100        |    57.9/100     | Rays @ Angels                      
  #39   | Willson Contreras         | Tyler Glasnow             | 56.8/100        |    48.2/100     | Cardinals @ Dodgers                
  #40   | Otto Lopez                | Jason Alexander           |    56.8/100     | 31.5/100        | Astros @ Marlins                   
  #41   | Ben Rice                  | Patrick Corbin            |    56.6/100     | 46.4/100        | Yankees @ Rangers                  
  #42   | Christian Yelich          | Erick Fedde               | 56.4/100        |    36.9/100     | Brewers @ Braves                   
  #43   | Andrew McCutchen          | Justin Verlander          |    56.1/100     | 61.0/100        | Giants @ Pirates                   
  #44   | Caleb Durbin              | Erick Fedde               | 56.1/100        |    11.2/100     | Brewers @ Braves                   
  #45   | Paul Goldschmidt          | Patrick Corbin            |    55.9/100     | 52.2/100        | Yankees @ Rangers                  
  #46   | Nolan Gorman              | Tyler Glasnow             | 55.7/100        |    57.5/100     | Cardinals @ Dodgers                
  #47   | Oneil Cruz                | Justin Verlander          |    55.5/100     | 41.8/100        | Giants @ Pirates                   
  #48   | Freddy Fermin             | Brandon Pfaadt            |    55.2/100     | 49.9/100        | Padres @ Diamondbacks              
  #49   | Kyle Isbel                | Brayan Bello              | 55.0/100        |    65.8/100     | Royals @ Red Sox                   
  #50   | Max Muncy                 | Sonny Gray                | 54.9/100        |    38.9/100     | Cardinals @ Dodgers                
  #51   | Michael Harris            | Quinn Priester            |    54.7/100     | 95.9/100        | Brewers @ Braves                   
  #52   | Royce Lewis               | Casey Mize                | 54.3/100        |    33.6/100     | Twins @ Tigers                     
  #53   | Josh Lowe                 | Yusei Kikuchi             | 54.2/100        |    49.0/100     | Rays @ Angels                      
  #54   | Thairo Estrada            | Eric Lauer                | 54.1/100        |    12.5/100     | Blue Jays @ Rockies              
  #55   | Matt Olson                | Quinn Priester            |    54.1/100     | 32.4/100        | Brewers @ Braves                   
  #56   | Christopher Morel         | Yusei Kikuchi             | 53.8/100        |    43.3/100     | Rays @ Angels                      
  #57   | Anthony Volpe             | Patrick Corbin            |    53.7/100     | 60.9/100        | Yankees @ Rangers                  
  #58   | Bryce Harper              | Cade Povich               | 53.6/100        |    22.7/100     | Orioles @ Phillies                 
  #59   | Abraham Toro              | Bailey Falter             | 53.2/100        |    38.0/100     | Royals @ Red Sox                   
  #60   | Spencer Steer             | Michael Soroka            |    53.1/100     | 38.5/100        | Reds @ Cubs                        
  #61   | Carlos Santana            | Sean Manaea               | 52.9/100        |    63.9/100     | Guardians @ Mets                   
  #62   | Addison Barger            | Tanner Gordon             | 52.7/100        |    67.2/100     | Blue Jays @ Rockies              
  #63   | Trevor Larnach            | Casey Mize                | 52.3/100        |    36.4/100     | Twins @ Tigers                     
  #64   | Sal Frelick               | Erick Fedde               | 52.0/100        |    50.6/100     | Brewers @ Braves                   
  #65   | Roman Anthony             | Bailey Falter             | 52.0/100        |    26.4/100     | Royals @ Red Sox                   
  #66   | Spencer Horwitz           | Justin Verlander          |    51.8/100     | 39.7/100        | Giants @ Pirates                   
  #67   | Ramón Laureano            | Brandon Pfaadt            |    51.8/100     | 42.2/100        | Padres @ Diamondbacks              
  #68   | Ronny Mauricio            | Slade Cecconi             | 51.7/100        |    34.9/100     | Guardians @ Mets                   
  #69   | Francisco Lindor          | Slade Cecconi             | 51.5/100        |    41.0/100     | Guardians @ Mets                   
  #70   | Masyn Winn                | Tyler Glasnow             | 51.2/100        |    29.8/100     | Cardinals @ Dodgers                
  #71   | Corey Seager              | Max Fried                 | 50.6/100        |    42.9/100     | Yankees @ Rangers                  
  #72   | Adolis García             | Max Fried                 | 50.5/100        |    50.9/100     | Yankees @ Rangers                  
  #73   | Gustavo Campero           | Adrian Houser             | 50.3/100        |    29.0/100     | Rays @ Angels                      
  #74   | Agustín Ramírez           | Jason Alexander           |    50.2/100     | 28.5/100        | Astros @ Marlins                   
  #75   | Adley Rutschman           | Jesús Luzardo             | 50.2/100        |    24.6/100     | Orioles @ Phillies                 
  #76   | Carson Kelly              | Nick Lodolo               | 50.1/100        |    45.6/100     | Reds @ Cubs                        
  #77   | Andrew Vaughn             | Erick Fedde               | 49.6/100        |    36.0/100     | Brewers @ Braves                   
  #78   | Drake Baldwin             | Quinn Priester            |    49.5/100     | 31.9/100        | Brewers @ Braves                   
  #79   | Rob Refsnyder             | Bailey Falter             | 49.4/100        |    50.9/100     | Royals @ Red Sox                   
  #80   | Jackson Merrill           | Brandon Pfaadt            |    49.0/100     | 48.5/100        | Padres @ Diamondbacks              
  #81   | Ryan O'Hearn              | Brandon Pfaadt            |    49.0/100     | 66.7/100        | Padres @ Diamondbacks              
  #82   | Henry Davis               | Justin Verlander          |    48.9/100     | 38.1/100        | Giants @ Pirates                   
  #83   | Christian Moore           | Adrian Houser             | 48.3/100        |    14.9/100     | Rays @ Angels                      
  #84   | Wyatt Langford            | Max Fried                 | 48.1/100        |    35.4/100     | Yankees @ Rangers                  
  #85   | Mark Vientos              | Slade Cecconi             | 47.3/100        |    72.7/100     | Guardians @ Mets                   
  #86   | Harrison Bader            | Cade Povich               | 47.1/100        |    42.7/100     | Orioles @ Phillies                 
  #87   | Michael Conforto          | Sonny Gray                | 46.8/100        |    72.7/100     | Cardinals @ Dodgers                
  #88   | Jordan Beck               | Eric Lauer                | 46.4/100        |    18.4/100     | Blue Jays @ Rockies              
  #89   | Hunter Goodman            | Eric Lauer                | 46.4/100        |    23.0/100     | Blue Jays @ Rockies              
  #90   | Brooks Lee                | Casey Mize                | 46.0/100        |    52.8/100     | Twins @ Tigers                     
  #91   | Jonathan India            | Brayan Bello              | 46.0/100        |    43.5/100     | Royals @ Red Sox                   
  #92   | Kody Clemens              | Casey Mize                | 45.2/100        |    34.4/100     | Twins @ Tigers                     
  #93   | Cody Bellinger            | Patrick Corbin            |    45.0/100     | 50.2/100        | Yankees @ Rangers                  
  #94   | Justin Turner             | Nick Lodolo               | 44.7/100        |    65.2/100     | Reds @ Cubs                        
  #95   | Nick Castellanos          | Cade Povich               | 44.7/100        |    36.7/100     | Orioles @ Phillies                 
  #96   | William Contreras         | Erick Fedde               | 44.5/100        |    48.2/100     | Brewers @ Braves                   
  #97   | Iván Herrera              | Tyler Glasnow             | 44.2/100        |    28.7/100     | Cardinals @ Dodgers                
  #98   | Lars Nootbaar             | Tyler Glasnow             | 44.1/100        |    39.1/100     | Cardinals @ Dodgers                
  #99   | Geraldo Perdomo           | JP Sears                  | 43.9/100        |    62.7/100     | Padres @ Diamondbacks              
  #100  | Nolan Schanuel            | Adrian Houser             | 43.6/100        |    30.0/100     | Rays @ Angels                      
`;
        // Raw text data from the new report
        const reportText = `

======================================================================================================================================================
                                                      HOME RUN PREDICTION REPORT FOR 2025-08-05                                                       
======================================================================================================================================================
                                                    --- TOP 10 PICKS OF THE DAY (90-Day Model) ---                                                    
------------------------------------------------------------------------------------------------------------------------------------------------------
  Rank  | Batter               | Pitcher              |   Final Score   | Top Factors                                       
  ----- | -------------------- | -------------------- | --------------- | --------------------------------------------------
  #1    | Juan Soto            | Slade Cecconi        |      50.38%     | hr_per_9 (-), g (+), hr_per_fb (+)
  #2    | Ketel Marte          | JP Sears             |      49.26%     | hr_per_9 (-), g (+), hr_per_fb (+)
  #3    | Alec Burleson        | Tyler Glasnow        |      47.28%     | hr_per_9 (-), g (+), iso (-)
  #4    | TJ Friedl            | Michael Soroka       |      46.63%     | hr_per_9 (-), g (+), iso (-)
  #5    | Pete Alonso          | Slade Cecconi        |      45.07%     | hr_per_9 (-), g (+), iso (-)
  #6    | Elly De La Cruz      | Michael Soroka       |      43.88%     | hr_per_9 (-), g (+), iso (-)
  #7    | Ceddanne Rafaela     | Bailey Falter        |      42.83%     | hr_per_9 (-), g (+), iso (-)
  #8    | Andrew Vaughn        | Erick Fedde          |      42.21%     | hr_per_9 (-), g (+), iso (-)
  #9    | Max Muncy            | Sonny Gray           |      42.00%     | hr_per_9 (-), g (+), hr_per_fb (+)
  #10   | Yainer Diaz          | Sandy Alcántara      |      42.00%     | hr_per_9 (-), g (+), iso (-)

========================================================================================================================
GAME: Twins @ Tigers (6:40 PM ET) | HR Park Factor: 99
------------------------------------------------------------------------------------------------------------------------
  Tigers Batters vs. Darren McCaughan (Low Data)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Colt Keith                |     Low Data    |      43.04%     |       N/A      
  Gleyber Torres            |     Low Data    |      44.89%     |       N/A      
  Kerry Carpenter           |     Low Data    |      48.62%     |       N/A      
  Riley Greene              |     Low Data    |      47.40%     |       N/A      
  Spencer Torkelson         |     Low Data    |      52.11%     |       N/A      
  Wenceel Pérez             |     Low Data    |      39.65%     |       N/A      
  Zach McKinstry            |     Low Data    |      38.30%     |       N/A      
  Dillon Dingler            |     Low Data    |      39.24%     |       N/A      
  Javier Báez               |     Low Data    |      42.70%     |       N/A      

------------------------------------------------------------------------------------------------------------------------
  Twins Batters vs. Casey Mize (Last 90d: 259 PA | 22.0% K | 6.2% BB | 2.32% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Matt Wallner              |      41.89%     |      42.75%     |      44/100    
  Kody Clemens              |      35.95%     |      40.38%     |      54/100    
  Ryan Jeffers              |      33.25%     |      39.71%     |      31/100    
  Trevor Larnach            |      32.01%     |      39.14%     |      29/100    
  Brooks Lee                |      29.23%     |      31.68%     |      39/100    
  Edouard Julien            |     Low Data    |      34.48%     |      12/100    
  Royce Lewis               |      27.22%     |      42.62%     |      37/100    
  Alan Roden                |      19.65%     |      20.15%     |      51/100    
  Austin Martin             |     Low Data    |      19.72%     |      4/100     

========================================================================================================================
GAME: Giants @ Pirates (6:40 PM ET) | HR Park Factor: 99
------------------------------------------------------------------------------------------------------------------------
  Pirates Batters vs. Justin Verlander (Last 90d: 241 PA | 18.7% K | 8.7% BB | 2.49% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Oneil Cruz                |      32.75%     |      37.54%     |      7/100     
  Henry Davis               |      30.56%     |      32.76%     |      9/100     
  Nick Gonzales             |      29.49%     |      30.38%     |      6/100     
  Isiah Kiner-Falefa        |      27.57%     |      28.36%     |      4/100     
  Bryan Reynolds            |      27.49%     |      39.38%     |      11/100    
  Tommy Pham                |      25.99%     |      35.15%     |      15/100    
  Andrew McCutchen          |      25.95%     |      42.41%     |      39/100    
  Jared Triolo              |      24.92%     |      33.73%     |      8/100     
  Spencer Horwitz           |      24.63%     |      35.98%     |      28/100    

------------------------------------------------------------------------------------------------------------------------
  Giants Batters vs. Johan Oviedo (Low Data)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Heliot Ramos              |     Low Data    |      37.84%     |       N/A      
  Rafael Devers             |     Low Data    |      38.31%     |       N/A      
  Willy Adames              |     Low Data    |      47.23%     |       N/A      
  Matt Chapman              |     Low Data    |      37.53%     |       N/A      
  Dominic Smith             |     Low Data    |      38.63%     |       N/A      
  Casey Schmitt             |     Low Data    |      34.15%     |       N/A      
  Jung Hoo Lee              |     Low Data    |      25.95%     |       N/A      
  Patrick Bailey            |     Low Data    |      28.82%     |       N/A      
  Grant McCray              |     Low Data    |      30.54%     |       N/A      

========================================================================================================================
GAME: Astros @ Marlins (6:40 PM ET) | HR Park Factor: 101
------------------------------------------------------------------------------------------------------------------------
  Marlins Batters vs. Jason Alexander (Last 90d: 107 PA | 15.0% K | 12.1% BB | 4.67% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Kyle Stowers              |      40.04%     |      36.40%     |      38/100    
  Otto Lopez                |      30.86%     |      35.11%     |      57/100    
  Agustín Ramírez           |      30.42%     |      33.09%     |      53/100    
  Liam Hicks                |      20.59%     |      28.65%     |      41/100    
  Dane Myers                |      20.30%     |      35.62%     |      21/100    
  Xavier Edwards            |      20.25%     |      24.85%     |      44/100    
  Graham Pauley             |      19.11%     |      31.25%     |      14/100    

------------------------------------------------------------------------------------------------------------------------
  Astros Batters vs. Sandy Alcántara (Last 90d: 361 PA | 17.2% K | 6.9% BB | 2.49% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Yainer Diaz               |      42.00%     |      37.92%     |      34/100    
  Jeremy Peña               |      41.66%     |      33.42%     |      39/100    
  Christian Walker          |      36.72%     |      41.11%     |      28/100    
  Víctor Caratini           |      33.60%     |      38.51%     |      6/100     
  José Altuve               |      33.50%     |      45.19%     |      6/100     
  Carlos Correa             |      28.58%     |      33.58%     |      30/100    
  Taylor Trammell           |      27.92%     |      28.86%     |      36/100    
  Cam Smith                 |      25.65%     |      31.83%     |      20/100    
  T. J. McFarland           |     Low Data    |     Low Data    |       N/A      

========================================================================================================================
GAME: Orioles @ Phillies (6:45 PM ET) | HR Park Factor: 101
------------------------------------------------------------------------------------------------------------------------
  Phillies Batters vs. Cade Povich (Last 90d: 152 PA | 28.3% K | 7.2% BB | 2.63% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Kyle Schwarber            |      41.18%     |      45.90%     |      3/100     
  Nick Castellanos          |      36.14%     |      42.79%     |      13/100    
  Trea Turner               |      34.15%     |      41.95%     |      9/100     
  Weston Wilson             |      33.79%     |      30.07%     |      2/100     
  Edmundo Sosa              |      33.13%     |      38.76%     |      6/100     
  Harrison Bader            |      30.90%     |      39.28%     |      21/100    
  Otto Kemp                 |      30.45%     |      27.43%     |      7/100     
  Bryce Harper              |      27.67%     |      40.48%     |      21/100    
  J. T. Realmuto            |      24.80%     |      43.57%     |      2/100     

------------------------------------------------------------------------------------------------------------------------
  Orioles Batters vs. Jesús Luzardo (Last 90d: 349 PA | 26.6% K | 9.5% BB | 2.58% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Tyler O'Neill             |      29.36%     |      42.56%     |      22/100    
  Dylan Carlson             |      29.00%     |      28.11%     |      9/100     
  Jordan Westburg           |      28.34%     |      29.82%     |      22/100    
  Adley Rutschman           |      26.35%     |      36.37%     |      14/100    
  Jackson Holliday          |      25.27%     |      35.42%     |      26/100    
  Coby Mayo                 |      24.92%     |      25.93%     |      24/100    
  Gunnar Henderson          |      24.75%     |      35.43%     |      10/100    
  Colton Cowser             |      22.99%     |      33.53%     |      28/100    

========================================================================================================================
GAME: Royals @ Red Sox (7:10 PM ET) | HR Park Factor: 105
------------------------------------------------------------------------------------------------------------------------
  Red Sox Batters vs. Bailey Falter (Last 90d: 307 PA | 13.4% K | 9.1% BB | 3.58% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Ceddanne Rafaela          |      42.83%     |      37.47%     |      26/100    
  Jarren Duran              |      39.85%     |      40.36%     |      24/100    
  Trevor Story              |      38.21%     |      37.88%     |      42/100    
  Rob Refsnyder             |      38.17%     |      41.23%     |      30/100    
  Romy Gonzalez             |      32.17%     |      34.50%     |      27/100    
  Alex Bregman              |      29.57%     |      42.88%     |      32/100    
  Abraham Toro              |      25.18%     |      29.04%     |      33/100    
  Roman Anthony             |      19.33%     |      25.89%     |      29/100    
  Connor Wong               |      17.79%     |      33.12%     |      12/100    

------------------------------------------------------------------------------------------------------------------------
  Royals Batters vs. Brayan Bello (Last 90d: 394 PA | 18.0% K | 8.6% BB | 2.28% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Mike Yastrzemski          |      39.07%     |      36.74%     |      24/100    
  John Rave                 |      39.02%     |      21.98%     |      49/100    
  Vinnie Pasquantino        |      34.74%     |      34.93%     |      24/100    
  Bobby Witt                |      26.06%     |      49.25%     |      2/100     
  Adam Frazier              |      25.58%     |      24.46%     |      10/100    
  Jonathan India            |      25.10%     |      35.42%     |      25/100    
  Maikel García             |      25.05%     |      38.74%     |      2/100     
  Kyle Isbel                |      25.02%     |      24.13%     |      11/100    
  Salvador Pérez            |      21.86%     |      47.93%     |      2/100     

========================================================================================================================
GAME: Guardians @ Mets (7:10 PM ET) | HR Park Factor: 98
------------------------------------------------------------------------------------------------------------------------
  Mets Batters vs. Slade Cecconi (Last 90d: 314 PA | 20.1% K | 6.7% BB | 4.14% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Juan Soto                 |      50.38%     |      48.44%     |      8/100     
  Pete Alonso               |      45.07%     |      54.09%     |      53/100    
  Ronny Mauricio            |      39.94%     |      39.20%     |      40/100    
  Jeff McNeil               |      39.93%     |      43.92%     |      21/100    
  Francisco Lindor          |      39.43%     |      51.44%     |      39/100    
  Brandon Nimmo             |      35.61%     |      51.74%     |      72/100    
  Mark Vientos              |      32.42%     |      48.28%     |      23/100    
  Cedric Mullins            |      30.59%     |      51.39%     |      57/100    
  Francisco Álvarez         |      24.90%     |      51.30%     |      2/100     

------------------------------------------------------------------------------------------------------------------------
  Guardians Batters vs. Sean Manaea (Last 90d: 68 PA | 32.4% K | 5.9% BB | 2.94% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  David Fry                 |      32.99%     |      43.04%     |      2/100     
  Angel Martínez            |      31.97%     |      29.65%     |      4/100     
  José Ramírez              |      31.25%     |      42.24%     |      3/100     
  Carlos Santana            |      27.60%     |      42.04%     |      4/100     
  Steven Kwan               |      20.67%     |      28.98%     |      3/100     
  Nolan Jones               |      18.30%     |      34.96%     |      5/100     
  Gabriel Arias             |      17.63%     |      34.29%     |      2/100     
  Austin Hedges             |      17.15%     |      27.36%     |      4/100     
  Brayan Rocchio            |      17.01%     |      28.13%     |      4/100     

========================================================================================================================
GAME: Brewers @ Braves (7:15 PM ET) | HR Park Factor: 100
------------------------------------------------------------------------------------------------------------------------
  Braves Batters vs. Quinn Priester (Last 90d: 338 PA | 21.0% K | 5.9% BB | 2.66% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Eli White                 |      37.13%     |      22.95%     |      17/100    
  Sean Murphy               |      37.07%     |      35.42%     |      17/100    
  Drake Baldwin             |      31.48%     |      29.29%     |      34/100    
  Michael Harris            |      29.41%     |      38.30%     |      9/100     
  Ozzie Albies              |      29.14%     |      35.20%     |      24/100    
  Matt Olson                |      27.24%     |      37.47%     |      14/100    
  Nick Allen                |      26.89%     |      20.73%     |      15/100    
  Jurickson Profar          |      23.68%     |      33.80%     |      21/100    
  Nacho Alvarez             |      17.98%     |      19.57%     |      2/100     

------------------------------------------------------------------------------------------------------------------------
  Brewers Batters vs. Erick Fedde (Last 90d: 332 PA | 14.8% K | 9.3% BB | 3.61% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Andrew Vaughn             |      42.21%     |      42.37%     |      38/100    
  Isaac Collins             |      40.61%     |      29.02%     |      35/100    
  Brice Turang              |      34.89%     |      30.35%     |      57/100    
  Christian Yelich          |      33.83%     |      40.96%     |      42/100    
  Blake Perkins             |      33.67%     |      30.61%     |      7/100     
  Joey Ortiz                |      33.53%     |      31.31%     |      28/100    
  William Contreras         |      23.00%     |      38.24%     |      36/100    
  Anthony Seigler           |      22.73%     |      15.22%     |      11/100    
  Brandon Lockridge         |      19.74%     |      18.23%     |      21/100    

========================================================================================================================
GAME: Yankees @ Rangers (8:05 PM ET) | HR Park Factor: 98
------------------------------------------------------------------------------------------------------------------------
  Rangers Batters vs. Max Fried (Last 90d: 361 PA | 23.8% K | 5.8% BB | 2.22% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Marcus Semien             |      28.13%     |      28.99%     |      32/100    
  Corey Seager              |      27.24%     |      26.93%     |      36/100    
  Josh Jung                 |      26.25%     |      22.90%     |      40/100    
  Adolis García             |      25.05%     |      26.03%     |      29/100    
  Wyatt Langford            |      24.47%     |      26.03%     |      49/100    
  Jonah Heim                |      23.50%     |      23.67%     |      30/100    
  Ezequiel Duran            |      18.89%     |      16.60%     |      14/100    
  Josh Smith                |      18.31%     |      22.31%     |      57/100    
  Sam Haggerty              |      15.43%     |      15.50%     |      62/100    

------------------------------------------------------------------------------------------------------------------------
  Yankees Batters vs. Patrick Corbin (Last 90d: 353 PA | 21.5% K | 6.8% BB | 2.83% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Cody Bellinger            |      39.16%     |      41.20%     |      37/100    
  Austin Wells              |      31.17%     |      42.07%     |      27/100    
  Giancarlo Stanton         |      28.99%     |      39.67%     |      20/100    
  Austin Slater             |      28.87%     |      35.07%     |     100/100    
  Anthony Volpe             |      28.11%     |      36.54%     |      34/100    
  Amed Rosario              |      27.88%     |      31.03%     |      35/100    
  Paul Goldschmidt          |      22.23%     |      40.50%     |      31/100    
  Jazz Chisholm             |      20.55%     |      40.74%     |      41/100    
  José Caballero            |      17.44%     |      29.84%     |      21/100    

========================================================================================================================
GAME: Reds @ Cubs (8:05 PM ET) | HR Park Factor: 95
------------------------------------------------------------------------------------------------------------------------
  Cubs Batters vs. Nick Lodolo (Last 90d: 348 PA | 26.1% K | 4.9% BB | 3.45% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Kyle Tucker               |      40.10%     |      48.30%     |      32/100    
  Ian Happ                  |      38.58%     |      37.95%     |      26/100    
  Seiya Suzuki              |      35.19%     |      45.42%     |      12/100    
  Willi Castro              |      33.91%     |      39.23%     |      21/100    
  Carson Kelly              |      30.91%     |      33.67%     |      48/100    
  Dansby Swanson            |      28.55%     |      38.35%     |      18/100    
  Nico Hoerner              |      25.20%     |      25.19%     |      22/100    
  Matt Shaw                 |      24.12%     |      26.88%     |      60/100    
  Justin Turner             |      23.21%     |      35.41%     |      51/100    

------------------------------------------------------------------------------------------------------------------------
  Reds Batters vs. Michael Soroka (Last 90d: 325 PA | 25.8% K | 7.1% BB | 3.08% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  TJ Friedl                 |      46.63%     |      42.58%     |      24/100    
  Elly De La Cruz           |      43.88%     |      48.56%     |      28/100    
  Austin Hays               |      35.30%     |      45.72%     |      34/100    
  Spencer Steer             |      32.64%     |      49.22%     |      39/100    
  Ke'Bryan Hayes            |      32.39%     |      35.94%     |      11/100    
  Tyler Stephenson          |      31.52%     |      46.34%     |      28/100    
  Jake Fraley               |      31.13%     |      38.46%     |      7/100     
  Matt McLain               |      30.61%     |      43.17%     |      17/100    
  Gavin Lux                 |      22.32%     |      40.71%     |      22/100    

========================================================================================================================
GAME: Blue Jays @ Rockies (8:40 PM ET) | HR Park Factor: 112
------------------------------------------------------------------------------------------------------------------------
  Rockies Batters vs. Eric Lauer (Last 90d: 274 PA | 25.9% K | 5.5% BB | 2.92% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Warming Bernabel          |     Low Data    |     Low Data    |      3/100     
  Kyle Farmer               |      33.00%     |      38.57%     |      13/100    
  Ezequiel Tovar            |      32.45%     |      44.00%     |      18/100    
  Jordan Beck               |      29.60%     |      35.04%     |      28/100    
  Hunter Goodman            |      28.40%     |      38.26%     |      30/100    
  Braxton Fulford           |     Low Data    |      29.33%     |      4/100     
  Tyler Freeman             |      25.46%     |      32.08%     |      7/100     
  Brenton Doyle             |      24.81%     |      41.12%     |      19/100    
  Thairo Estrada            |      23.76%     |      33.87%     |      38/100    

------------------------------------------------------------------------------------------------------------------------
  Blue Jays Batters vs. Tanner Gordon (Last 90d: 114 PA | 13.2% K | 7.0% BB | 2.63% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Nathan Lukes              |      34.48%     |      36.21%     |      9/100     
  Daulton Varsho            |      33.91%     |      49.70%     |      3/100     
  Joey Loperfido            |      26.50%     |      39.09%     |      8/100     
  Addison Barger            |      26.22%     |      43.00%     |      8/100     
  Ernie Clement             |      25.61%     |      37.84%     |      4/100     
  Bo Bichette               |      25.08%     |      39.60%     |      4/100     
  Vladimir Guerrero         |      20.75%     |      56.68%     |      2/100     
  Ty France                 |      19.01%     |      42.85%     |      7/100     
  Alejandro Kirk            |      18.28%     |      34.91%     |      7/100     

========================================================================================================================
GAME: Rays @ Angels (9:38 PM ET) | HR Park Factor: 101
------------------------------------------------------------------------------------------------------------------------
  Angels Batters vs. Adrian Houser (Last 90d: 278 PA | 16.5% K | 7.9% BB | 1.08% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Yoán Moncada              |      34.30%     |      23.05%     |      5/100     
  Jo Adell                  |      33.41%     |      29.47%     |      7/100     
  Christian Moore           |      33.16%     |      21.24%     |      3/100     
  Taylor Ward               |      33.02%     |      33.66%     |      5/100     
  Logan O'Hoppe             |      29.61%     |      25.35%     |      7/100     
  Mike Trout                |      27.09%     |      31.65%     |      5/100     
  Zach Neto                 |      26.58%     |      27.00%     |      8/100     
  Gustavo Campero           |      25.90%     |      20.68%     |      10/100    
  Nolan Schanuel            |      25.12%     |      23.82%     |      20/100    

------------------------------------------------------------------------------------------------------------------------
  Rays Batters vs. Yusei Kikuchi (Last 90d: 388 PA | 25.3% K | 8.2% BB | 2.84% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Junior Caminero           |      38.36%     |      36.12%     |      56/100    
  Yandy Díaz                |      38.28%     |      32.30%     |      26/100    
  Christopher Morel         |      35.22%     |      36.83%     |      32/100    
  Josh Lowe                 |      34.66%     |      36.53%     |      50/100    
  Brandon Lowe              |      33.00%     |      35.85%     |      34/100    
  Nick Fortes               |      28.65%     |      24.23%     |      25/100    
  Ha-Seong Kim              |      27.99%     |      28.60%     |      16/100    
  Jake Mangum               |      26.85%     |      18.82%     |      27/100    
  Jonny DeLuca              |      14.49%     |      25.12%     |      15/100    

========================================================================================================================
GAME: Padres @ Diamondbacks (9:40 PM ET) | HR Park Factor: 104
------------------------------------------------------------------------------------------------------------------------
  Diamondbacks Batters vs. JP Sears (Last 90d: 336 PA | 19.9% K | 6.8% BB | 5.65% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Ketel Marte               |      49.26%     |      46.26%     |      25/100    
  Corbin Carroll            |      38.82%     |      43.06%     |      28/100    
  Geraldo Perdomo           |      33.13%     |      29.53%     |      38/100    
  Jake McCarthy             |      31.67%     |      30.10%     |      28/100    
  José Herrera              |      25.39%     |      31.01%     |      50/100    
  Lourdes Gurriel           |      24.88%     |      48.82%     |      22/100    
  Blaze Alexander           |      24.16%     |      26.95%     |      32/100    
  Tyler Locklear            |     Low Data    |      34.08%     |      1/100     
  Jorge Barrosa             |     Low Data    |      17.85%     |      10/100    

------------------------------------------------------------------------------------------------------------------------
  Padres Batters vs. Brandon Pfaadt (Last 90d: 336 PA | 18.8% K | 5.4% BB | 3.87% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Ramón Laureano            |      39.18%     |      43.47%     |      45/100    
  Ryan O'Hearn              |      38.66%     |      47.00%     |      42/100    
  Xander Bogaerts           |      38.33%     |      39.11%     |      61/100    
  Manny Machado             |      37.95%     |      42.71%     |      39/100    
  Jake Cronenworth          |      35.84%     |      42.18%     |      35/100    
  Fernando Tatís            |      34.41%     |      54.67%     |      83/100    
  Luis Arráez               |      31.17%     |      39.44%     |      65/100    
  Freddy Fermin             |      29.47%     |      33.65%     |      37/100    
  Jackson Merrill           |      23.46%     |      39.60%     |      44/100    

========================================================================================================================
GAME: Cardinals @ Dodgers (10:10 PM ET) | HR Park Factor: 102
------------------------------------------------------------------------------------------------------------------------
  Dodgers Batters vs. Sonny Gray (Last 90d: 343 PA | 27.1% K | 2.9% BB | 2.62% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Max Muncy                 |      42.00%     |      44.88%     |       N/A      
  Michael Conforto          |      35.39%     |      43.79%     |      35/100    
  Miguel Rojas              |      34.05%     |      30.23%     |      28/100    
  Shohei Ohtani             |      32.94%     |      40.75%     |      74/100    
  Teoscar Hernández         |      31.45%     |      40.02%     |      30/100    
  Will Smith                |      30.11%     |      47.78%     |      22/100    
  Mookie Betts              |      29.19%     |      46.63%     |      41/100    
  Andy Pages                |      28.45%     |      43.50%     |      64/100    
  Freddie Freeman           |      22.58%     |      43.39%     |      39/100    

------------------------------------------------------------------------------------------------------------------------
  Cardinals Batters vs. Tyler Glasnow (Last 90d: 88 PA | 29.5% K | 11.4% BB | 3.41% HR)
  Batter                    |   90-Day Prob   |   2-Year Prob   |  HR Comp Score 
  ------------------------- | --------------- | --------------- | ---------------
  Alec Burleson             |      47.28%     |      41.13%     |      10/100    
  Nolan Gorman              |      40.67%     |      46.68%     |      12/100    
  Lars Nootbaar             |      38.69%     |      36.68%     |      13/100    
  Willson Contreras         |      37.27%     |      36.43%     |      5/100     
  Iván Herrera              |      34.47%     |      36.70%     |      11/100    
  Victor Scott              |      33.23%     |      37.79%     |      6/100     
  Brendan Donovan           |      32.14%     |      35.41%     |      27/100    
  Yohel Pozo                |      28.92%     |      25.88%     |      8/100     
  Masyn Winn                |      28.20%     |      31.48%     |      29/100    

========================================================================================================================
        `;

        function parseStrikeoutPredictions(text) {
            const predictions = [];
            const lines = text.trim().split('\n');
            for (let i = 2; i < lines.length; i++) {
                const line = lines[i];
                if (!line.includes(':')) continue;
                const parts = line.replace('-', '').split(':').map(p => p.trim());
                if (parts.length === 2) {
                    predictions.push({ name: parts[0], strikeouts: parts[1] });
                }
            }
            return predictions;
        }

        function renderStrikeoutPredictions(strikeoutData, container) {
            if (!strikeoutData || strikeoutData.length === 0) {
                container.innerHTML = '';
                return;
            }
            let playersHtml = strikeoutData.map(player => `
                <tr class="player-row">
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm">${player.name}</td>
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center font-semibold">${player.strikeouts}</td>
                </tr>
            `).join('');

            container.innerHTML = `
                <details class="top-picks-card rounded-lg shadow-md overflow-hidden border dark:border-gray-700">
                    <summary class="p-4 flex justify-between items-center game-header">
                        <h2 class="text-lg font-bold">⚾ Pitcher Strikeout Predictions ⚾</h2>
                        <svg class="w-6 h-6 summary-chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </summary>
                     <div class="p-4">
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white dark:bg-gray-800">
                                <thead class="table-header">
                                    <tr>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Pitcher</th>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Predicted Strikeouts</th>
                                    </tr>
                                </thead>
                                <tbody>${playersHtml}</tbody>
                            </table>
                        </div>
                    </div>
                </details>
            `;
        }

        function parseSimilarityReport(text) {
            const topPicks = [];
            const lines = text.trim().split('\n');
            for (let i = 5; i < lines.length; i++) {
                const line = lines[i];
                if (!line.includes('|')) continue;
                const parts = line.split('|').map(p => p.trim());
                if (parts.length === 6) {
                    topPicks.push({
                        rank: parts[0],
                        batter: parts[1],
                        pitcher: parts[2],
                        ninetyDaySim: parts[3],
                        twoYearSim: parts[4],
                        game: parts[5]
                    });
                }
            }
            return topPicks;
        }

        function renderSimilarityReport(similarityData, container) {
            if (!similarityData || similarityData.length === 0) {
                container.innerHTML = '';
                return;
            }
            let playersHtml = similarityData.map(player => `
                <tr class="player-row">
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center">${player.rank}</td>
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm player-name">${player.batter}</td>
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm">${player.pitcher}</td>
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center">${player.ninetyDaySim}</td>
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center">${player.twoYearSim}</td>
                    <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm">${player.game}</td>
                </tr>
            `).join('');

            container.innerHTML = `
                <details class="top-picks-card rounded-lg shadow-md overflow-hidden border dark:border-gray-700">
                    <summary class="p-4 flex justify-between items-center game-header">
                        <h2 class="text-lg font-bold">Top 100 Similarity Sluts</h2>
                        <svg class="w-6 h-6 summary-chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </summary>
                    <div class="p-4">
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white dark:bg-gray-800">
                                <thead class="table-header">
                                    <tr>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Rank</th>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Batter</th>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Pitcher</th>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">90-Day Sim</th>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">2-Year Sim</th>
                                        <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Game</th>
                                    </tr>
                                </thead>
                                <tbody>${playersHtml}</tbody>
                            </table>
                        </div>
                    </div>
                </details>
            `;
        }

        function parseReport(text) {
            const games = [];
            const allBlocks = text.split(/={80,}/);
            const gameStartIndex = allBlocks.findIndex(b => b.trim().startsWith('GAME:'));
            if (gameStartIndex === -1) { return []; }
            const gameBlocks = allBlocks.slice(gameStartIndex);

            gameBlocks.forEach(block => {
                if (!block.trim()) return;
                const lines = block.trim().split('\n');
                const gameTitleLine = lines.find(line => line.startsWith('GAME:'));
                if (!gameTitleLine) return;
                const gameTitle = gameTitleLine.replace('GAME: ', '').trim();
                const teamSections = block.split(/-{80,}/).slice(1);
                const teamsData = [];

                teamSections.forEach((section, teamIndex) => {
                    const sectionLines = section.trim().split('\n');
                    if (sectionLines.length < 3) return;
                    let teamTitle = sectionLines[0].trim();
                    let pitcherStats = 'N/A';
                    const statsIndex = teamTitle.indexOf('(');
                    if (statsIndex > -1) {
                        pitcherStats = teamTitle.substring(statsIndex).replace('(', '').replace(')', '');
                        teamTitle = teamTitle.substring(0, statsIndex).trim();
                    }
                    const players = [];
                    for (let i = 2; i < sectionLines.length; i++) {
                        const line = sectionLines[i];
                        if (!line.includes('|') || line.includes('---')) continue;
                        const parts = line.split('|').map(p => p.trim());
                        if (parts.length < 4) continue;
                        const name = parts[0];
                        const prob90DayStr = parts[1];
                        const prob2YearStr = parts[2];
                        const hrCompScoreStr = parts[3];
                        const prob90DayValue = prob90DayStr.toLowerCase().includes('low data') ? -1 : parseFloat(prob90DayStr);
                        const prob2YearValue = prob2YearStr.toLowerCase().includes('low data') ? -1 : parseFloat(prob2YearStr);
                        const hrCompScoreValue = hrCompScoreStr.toLowerCase().includes('low data') ? -1 : parseInt(hrCompScoreStr);
                        const isHigh90Day = (prob90DayValue > 5);
                        const isHigh2Year = (prob2YearValue > 25);
                        const isHighCompScore = (hrCompScoreValue >= 50);
                        players.push({ name, prob90DayStr, prob2YearStr, hrCompScoreStr, prob90DayValue, prob2YearValue, hrCompScoreValue, isHigh90Day, isHigh2Year, isHighCompScore });
                    }
                    if (players.length > 0) {
                        const hasHigh90Day = players.some(p => p.isHigh90Day);
                        const hasHigh2Year = players.some(p => p.isHigh2Year);
                        const hasHighCompScore = players.some(p => p.isHighCompScore);
                        teamsData.push({ id: `${gameTitle}-${teamIndex}`, title: teamTitle, pitcherStats, players, hasHigh90Day, hasHigh2Year, hasHighCompScore });
                    }
                });
                
                if (teamsData.length > 0) {
                    const gameHasHigh90Day = teamsData.some(t => t.hasHigh90Day);
                    const gameHasHigh2Year = teamsData.some(t => t.hasHigh2Year);
                    const gameHasHighCompScore = teamsData.some(t => t.hasHighCompScore);
                    games.push({ title: gameTitle, teams: teamsData, hasHigh90Day: gameHasHigh90Day, hasHigh2Year: gameHasHigh2Year, hasHighCompScore: gameHasHighCompScore });
                }
            });
            return games;
        }

        function renderReport(gamesData) {
            const container = document.getElementById('report-container');
            container.innerHTML = ''; 
            if (!gamesData || gamesData.length === 0) return;

            gamesData.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'card border overflow-hidden rounded-lg shadow-md transition-all duration-300';
                gameCard.dataset.gameTitle = game.title;
                gameCard.dataset.hasHigh90day = game.hasHigh90Day;
                gameCard.dataset.hasHigh2year = game.hasHigh2Year;
                gameCard.dataset.hasHighCompscore = game.hasHighCompScore;

                const teamsHtml = game.teams.map(team => {
                    const playersHtml = team.players.map(player => `
                        <tr class="player-row">
                            <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm player-name">${player.name}</td>
                            <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center ${player.prob90DayStr.toLowerCase().includes('low data') ? 'low-data' : ''}">${player.prob90DayStr}</td>
                            <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center ${player.prob2YearStr.toLowerCase().includes('low data') ? 'low-data' : ''}">${player.prob2YearStr}</td>
                            <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center ${player.hrCompScoreStr.toLowerCase().includes('low data') ? 'low-data' : ''}">${player.hrCompScoreStr}</td>
                        </tr>
                    `).join('');
                    return `
                        <div class="p-4" data-team-id="${team.id}">
                            <details class="mb-2">
                                <summary class="font-semibold text-gray-700 dark:text-gray-300 text-md mb-2 flex justify-between items-center">
                                    <span>${team.title}</span>
                                    <svg class="w-5 h-5 summary-chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                                </summary>
                                <div class="pitcher-stats-box text-sm p-2 rounded-md mt-2">${team.pitcherStats}</div>
                            </details>
                            <div class="overflow-x-auto">
                                <table class="min-w-full bg-white dark:bg-gray-800">
                                    <thead class="table-header">
                                        <tr>
                                            <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Batter</th>
                                            <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider sortable" data-sort-key="prob90DayValue">90-Day Prob</th>
                                            <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider sortable" data-sort-key="prob2YearValue">2-Year Prob</th>
                                            <th class="py-2 px-4 border-b-2 border-gray-200 dark:border-gray-600 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider sortable" data-sort-key="hrCompScoreValue">HR SIMILARITY</th>
                                        </tr>
                                    </thead>
                                    <tbody>${playersHtml}</tbody>
                                </table>
                            </div>
                        </div>
                    `;
                }).join('');
                gameCard.innerHTML = `
                    <div class="p-4 game-header"><h2 class="font-bold text-lg">${game.title}</h2></div>
                    <div class="divide-y divide-gray-200 dark:divide-gray-700">${teamsHtml}</div>
                `;
                container.appendChild(gameCard);
            });
        }
        
        function sortTeam(teamId, sortKey) {
            const teamData = allGamesData.flatMap(g => g.teams).find(t => t.id === teamId);
            if (!teamData) return;
            const order = (currentSort.key === sortKey && currentSort.order === 'desc') ? 'asc' : 'desc';
            currentSort = { key: sortKey, order };

            teamData.players.sort((a, b) => {
                const valA = a[sortKey];
                const valB = b[sortKey];
                if (valA === -1 && valB !== -1) return 1;
                if (valB === -1 && valA !== -1) return -1;
                return order === 'desc' ? valB - valA : valA - valB;
            });

            const teamContainer = document.querySelector(`[data-team-id="${teamId}"]`);
            if (!teamContainer) return;

            const tableHeaders = teamContainer.querySelectorAll('th.sortable');
            tableHeaders.forEach(th => {
                th.classList.remove('sort-asc', 'sort-desc');
                if (th.dataset.sortKey === sortKey) {
                    th.classList.add(order === 'desc' ? 'sort-desc' : 'sort-asc');
                }
            });

            const tableBody = teamContainer.querySelector('tbody');
            const playersHtml = teamData.players.map(player => `
                 <tr class="player-row" data-filter-90day="${player.isHigh90Day}" data-filter-2year="${player.isHigh2Year}" data-filter-compscore="${player.isHighCompScore}">
                     <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm player-name">${player.name}</td>
                     <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center ${player.prob90DayStr.toLowerCase().includes('low data') ? 'low-data' : ''}">${player.prob90DayStr}</td>
                     <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center ${player.prob2YearStr.toLowerCase().includes('low data') ? 'low-data' : ''}">${player.prob2YearStr}</td>
                     <td class="py-2 px-4 border-b border-gray-200 dark:border-gray-700 text-sm text-center ${player.hrCompScoreStr.toLowerCase().includes('low data') ? 'low-data' : ''}">${player.hrCompScoreStr}</td>
                 </tr>
             `).join('');

            tableBody.innerHTML = playersHtml;
            applyFilter();
        }

        function applyFilter() {
            const gameCards = document.querySelectorAll('#report-container .card');
            const noDataMessage = document.getElementById('no-data-message');
            let totalVisibleCards = 0;
            let filterAttributeName = '';
            let highlightClass = '';

            if (activeFilter === '90day') { filterAttributeName = 'data-filter-90day'; highlightClass = 'highlight'; }
            if (activeFilter === '2year') { filterAttributeName = 'data-filter-2year'; highlightClass = 'two-year-highlight'; }
            if (activeFilter === 'compscore') { filterAttributeName = 'data-filter-compscore'; highlightClass = 'sim-highlight'; }

            gameCards.forEach(card => {
                const playerRows = card.querySelectorAll('.player-row');
                let cardHasAVisiblePlayer = false;
                playerRows.forEach(row => {
                    row.classList.remove('highlight', 'two-year-highlight', 'sim-highlight');
                    if (activeFilter === 'none' || row.getAttribute(filterAttributeName) === 'true') {
                        row.style.display = 'table-row';
                        if(activeFilter !== 'none' && row.getAttribute(filterAttributeName) === 'true') row.classList.add(highlightClass);
                        cardHasAVisiblePlayer = true;
                    } else {
                        row.style.display = 'none';
                    }
                });

                if (cardHasAVisiblePlayer) {
                    card.style.display = 'block';
                    totalVisibleCards++;
                } else {
                    card.style.display = 'none';
                }
            });
            noDataMessage.classList.toggle('hidden', totalVisibleCards > 0 || activeFilter === 'none');
        }

        document.addEventListener('DOMContentLoaded', () => {
            // --- Get All Elements ---
            const themeToggleBtn = document.getElementById('theme-toggle');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
            const gameSelector = document.getElementById('game-selector');
            const goBackButton = document.getElementById('go-back-btn');
            const reportContainer = document.getElementById('report-container');
            const topReportsContainer = document.getElementById('top-reports-container');
            const focusViewContent = document.getElementById('focus-view-content');
            const focusLists = document.getElementById('focus-lists');
            const focusGame = document.getElementById('focus-game');
            const toggleTopReportsBtn = document.getElementById('toggle-top-reports-btn');
            const mainContent = document.getElementById('main-content');

            // --- Data Parsing & Initial Render ---
            const similarityData = parseSimilarityReport(similarityReportText);
            const strikeoutData = parseStrikeoutPredictions(strikeoutPredictionsText);
            allGamesData = parseReport(reportText);
            
            renderReport(allGamesData);
            renderSimilarityReport(similarityData, document.getElementById('similarity-container'));
            renderStrikeoutPredictions(strikeoutData, document.getElementById('strikeout-container'));

            // --- Theme Toggle ---
            if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                themeToggleLightIcon.classList.remove('hidden');
            } else {
                themeToggleDarkIcon.classList.remove('hidden');
            }
            themeToggleBtn.addEventListener('click', function() {
                themeToggleDarkIcon.classList.toggle('hidden');
                themeToggleLightIcon.classList.toggle('hidden');
                document.documentElement.classList.toggle('dark');
                const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
                localStorage.setItem('color-theme', theme);
            });

            // --- Main Layout Controls ---
            document.getElementById('toggle-90day-btn').addEventListener('click', () => {
                activeFilter = (activeFilter === '90day') ? 'none' : '90day';
                applyFilter();
            });
            document.getElementById('toggle-2year-btn').addEventListener('click', () => {
                activeFilter = (activeFilter === '2year') ? 'none' : '2year';
                applyFilter();
            });
            document.getElementById('toggle-compscore-btn').addEventListener('click', () => {
                activeFilter = (activeFilter === 'compscore') ? 'none' : 'compscore';
                applyFilter();
            });
            document.getElementById('zxm-button').addEventListener('click', () => window.open('https://x.com/Zxmbuu', '_blank'));
            mainContent.addEventListener('click', (e) => {
                const header = e.target.closest('.sortable');
                if (header) {
                    const sortKey = header.dataset.sortKey;
                    const teamContainer = header.closest('[data-team-id]');
                    if (teamContainer) sortTeam(teamContainer.dataset.teamId, sortKey);
                }
            });

            // --- Toggle Top Reports Visibility ---
            toggleTopReportsBtn.addEventListener('click', () => {
                const isHidden = topReportsContainer.classList.toggle('hidden');
                toggleTopReportsBtn.textContent = isHidden ? 'Show Top Reports' : 'Hide Top Reports';
            });

            // --- Game Selector & Focus View ---
            const populateGameSelector = () => {
                gameSelector.innerHTML = '';
                const defaultOption = document.createElement('option');
                defaultOption.textContent = '-- Select a Game to Focus On --';
                defaultOption.value = "all";
                gameSelector.appendChild(defaultOption);

                allGamesData.forEach(game => {
                    const option = document.createElement('option');
                    option.value = game.title;
                    option.textContent = game.title;
                    gameSelector.appendChild(option);
                });
            };
            populateGameSelector();

            gameSelector.addEventListener('change', (event) => {
                const selectedGameTitle = event.target.value;
                const isFocusView = selectedGameTitle !== "all";

                reportContainer.classList.toggle('hidden', isFocusView);
                focusViewContent.classList.toggle('hidden', !isFocusView);
                goBackButton.classList.toggle('hidden', !isFocusView);
                
                if (isFocusView) {
                    focusLists.appendChild(topReportsContainer);
                    const originalCard = document.querySelector(`#report-container .card[data-game-title="${selectedGameTitle}"]`);
                    focusGame.innerHTML = '';
                    if (originalCard) {
                        const cardClone = originalCard.cloneNode(true);
                        focusGame.appendChild(cardClone);
                    }
                } else {
                    document.querySelector('#main-content header').insertAdjacentElement('afterend', topReportsContainer);
                }
            });

            goBackButton.addEventListener('click', () => {
                gameSelector.value = "all";
                gameSelector.dispatchEvent(new Event('change'));
            });

            // --- Notepad Functionality ---
            const notepadTextarea = document.getElementById('notepad-textarea');
            document.getElementById('main-content').addEventListener('dblclick', (e) => {
                if (e.target.classList.contains('player-name')) {
                    const playerName = e.target.textContent.trim();
                    notepadTextarea.value += playerName + '\n';
                }
            });

            document.getElementById('clear-notepad-btn').addEventListener('click', () => {
                notepadTextarea.value = '';
            });

            document.getElementById('download-notepad-btn').addEventListener('click', () => {
                const text = notepadTextarea.value;
                const blob = new Blob([text], { type: 'text/plain' });
                const anchor = document.createElement('a');
                anchor.download = 'similarity_slut_picks.txt';
                anchor.href = window.URL.createObjectURL(blob);
                anchor.click();
                window.URL.revokeObjectURL(anchor.href);
            });
        });
    </script>
</body>
</html>

